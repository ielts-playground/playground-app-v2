(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{2841:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return r(9554)}])},7155:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(5121);let n=a.Z.create({baseURL:"https://server.ieltsmastersource.com",headers:{"Content-Type":"application/json"},timeout:3e4});n.interceptors.request.use(e=>{if(!e.headers.Authorization){let t=localStorage.getItem("TOKEN");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e));var s=n},3778:function(e,t,r){"use strict";var a=r(5893);r(1051),t.Z=e=>{let{loading:t}=e;return(0,a.jsx)("div",{id:"loading",className:t?"":"hide",children:(0,a.jsxs)("div",{id:"loadingInnerWrapper",children:[(0,a.jsx)("span",{id:"load1",children:"."}),(0,a.jsx)("span",{id:"load2",children:"."}),(0,a.jsx)("span",{id:"load3",children:"."})]})})}},6586:function(e,t,r){"use strict";var a=r(7294),n=r(2920);t.Z=()=>{let e=(0,a.useCallback)((e,t)=>{(0,n.Am)(t,{hideProgressBar:!0,autoClose:2e3,type:e})},[]);return{notify:e}}},9554:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(5893),n=r(7294),s=r(9332),i=r(9473),c=r(6586),l=r(7999),o=r(2808),u=r(6942);r(8189);let f={backspace:8,arrowLeft:37,arrowRight:39};var d=e=>{let{emailVerify:t,isVerifyError:r,onSubmitVerify:s}=e,[i,c]=(0,n.useState)([]),[l,o]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=[];Array.from(Array(6).keys()).forEach(t=>{e.push("")}),c(e)},[]),(0,n.useEffect)(()=>{r&&c(e=>e.map(e=>""))},[r]),(0,n.useEffect)(()=>{let[e,r]=t.split("@"),a="*****".concat(e.slice(-3));o("".concat(a,"@").concat(r))},[t]),(0,n.useEffect)(()=>{let e=i.every(e=>!!e);e&&i.length&&s(i.join(""))},[i]);let u=(e,t)=>{let r=e.target;c(e=>e.map((e,a)=>(a===t&&(e=r.value),e)));let a=r.nextElementSibling;a&&r.value&&(a.focus(),a.value&&a.select())},d=(e,t)=>{e.preventDefault();let r=e.clipboardData.getData("text");t||c(e=>e.map((e,t)=>r[t]))},h=(e,t)=>{let r=e.target;if(r.value){c(e=>e.map((e,r)=>(r===t&&(e=""),e)));return}t&&r.previousElementSibling.focus()},p=e=>{let t=e.target.previousElementSibling;t&&t.focus()},m=e=>{let t=e.target.nextElementSibling;t&&t.focus()},g=(e,t)=>{switch(e.keyCode){case f.backspace:h(e,t);break;case f.arrowLeft:p(e);break;case f.arrowRight:m(e)}};return(0,a.jsx)("div",{className:"container-vefiry",children:(0,a.jsxs)("form",{action:"#",children:[(0,a.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[(0,a.jsx)("h3",{children:"OTP VERIFICATION"}),(0,a.jsx)("p",{className:"info",children:"An OTP has been sent to"}),(0,a.jsx)("p",{children:l}),(0,a.jsx)("p",{className:"msg",children:"Please enter OTP to verify"})]}),(0,a.jsx)("div",{className:"d-flex mb-3",children:i.map((e,t)=>(0,a.jsx)("input",{type:"tel",maxLength:1,pattern:"[0-9]",className:"form-control shadow-none",value:e,onChange:e=>u(e,t),onPaste:e=>d(e,t),onKeyDown:e=>g(e,t)},t))})]})})},h=r(3778),p=()=>{let e=(0,s.useRouter)(),{notify:t}=(0,c.Z)(),r=(0,i.I0)(),f=(0,i.v9)(l._9),{emailVerify:p}=f,[m,g]=(0,n.useState)(!1),[v,x]=(0,n.useState)(!1),y=async a=>{g(!0);let n=await (0,u.Z3)({code:a,email:p});n.code===o.iH?(x(!1),r((0,l.PR)(Date.now())),t("success","Verify successfully!"),localStorage.setItem("TOKEN",n.data.token),localStorage.setItem("USER",JSON.stringify(n.data.user)),e.push("/list-exam")):(x(!0),t("error","Wrong code!")),g(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{loading:m}),(0,a.jsx)(d,{emailVerify:p,isVerifyError:v,onSubmitVerify:y})]})}},6942:function(e,t,r){"use strict";r.d(t,{Z3:function(){return i},lx:function(){return s},qL:function(){return n}});var a=r(7155);let n=async e=>{try{let t=await a.Z.post("api/v2/users/register",{...e});return t.data}catch(e){return console.log(e),!1}},s=async e=>{try{let t=await a.Z.post("/api/v2/users/authenticate",{...e});return t.data}catch(e){return console.log(e),!1}},i=async e=>{try{let t=await a.Z.post("/api/v2/users/verify-email",{...e});return t.data}catch(e){return!1}}},1051:function(){},8189:function(){}},function(e){e.O(0,[121,774,888,179],function(){return e(e.s=2841)}),_N_E=e.O()}]);