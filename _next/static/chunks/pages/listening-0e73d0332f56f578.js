(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{5007:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listening",function(){return n(2268)}])},2268:function(e,t,n){"use strict";n.r(t);var s=n(5893),u=n(1163),i=n(7294),r=n(9473),a=n(945),o=n(2314),c=n(5702),l=n(5016),d=n(5272),f=n(2808),E=n(3778),_=n(1002);t.default=()=>{let e=(0,r.I0)();(0,u.useRouter)();let t=(0,i.useRef)(null),n=(0,i.useRef)([]),v=(0,i.useRef)(0),[m,N]=(0,i.useState)(!1),[g,S]=(0,i.useState)([]),[p,w]=(0,i.useState)(void 0),[I,b]=(0,i.useState)(void 0),[x,T]=(0,i.useState)("50");(0,i.useEffect)(()=>{t.current&&(t.current.volume=Number(x)/100)},[t,x]),(0,i.useEffect)(()=>{n.current=g},[g]);let h=()=>{var t;let s={};null===(t=n.current)||void 0===t||t.forEach(e=>{e.type===f.Nb.CHOOSE_TWO_ANSWER_LISTENING?s["".concat(e.subId,"-").concat(e.subId+1)]=JSON.stringify(e.value):s["".concat(e.id)]=e.value}),(0,l.j)(v.current,{answers:s,examTestId:0}),e((0,a.vO)({currentPart:"listening",nextPart:"reading"}))},j=()=>(0,s.jsx)(_.Z,{isListening:!0,typePart:"listening",examTime:d.a.LISTENING,onSubmitExam:h,setVolume:T});return(0,i.useEffect)(()=>(e((0,a._G)(j())),()=>{e((0,a._G)(void 0))}),[]),(0,i.useEffect)(()=>{let e=async()=>{N(!0);let e=await (0,l.K)("listening","");if(e){let t=(0,c.A4)(e);S(t.dataContent),w(t.listTypeQuestion),b(e.resourceId),sessionStorage.setItem("EXAM_ID",String(e.id)),v.current=e.submitId}N(!1)};e()},[]),(0,i.useEffect)(()=>{let e=e=>(e.preventDefault(),e.returnValue="","");return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.Z,{loading:m}),(0,s.jsx)("div",{className:"page-container",children:(0,s.jsx)(o.Z,{isListening:!0,listTypeQuestion:p,listQuestion:g,setListQuestion:S})}),I&&(0,s.jsx)("audio",{ref:t,autoPlay:!0,muted:!1,src:"".concat("https://test.tuanm.dev","/api/v1/test/").concat(I,"/audio")})]})}}},function(e){e.O(0,[121,787,267,774,888,179],function(){return e(e.s=5007)}),_N_E=e.O()}]);